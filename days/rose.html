<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rose Day üåπ</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* --- 1. SHARED STYLES (Kept exactly as you had them) --- */
        :root { --primary: #ff3366; --glass: rgba(255, 255, 255, 0.3); --border: rgba(255, 255, 255, 0.6); --text: #2d3436; --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15); }
        * { box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif; margin: 0; padding: 0; min-height: 100vh;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #ffd1ff, #a18cd1);
            background-size: 400% 400%; animation: gradientBG 15s ease infinite;
            color: var(--text); overflow-x: hidden; -webkit-tap-highlight-color: transparent;
            text-align: center;
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* --- 2. SPECIFIC ELEMENTS --- */
        .container { max-width: 800px; margin: 0 auto; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; justify-content: center; }
        h2 { font-family: 'Dancing Script', cursive; font-size: 2.5rem; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); margin: 10px 0; }
        p { font-size: 1rem; color: #fff; line-height: 1.6; }
        
        .photo-frame {
            width: 200px; height: 200px; object-fit: cover; border: 5px solid white;
            border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-bottom: 15px; transform: rotate(-3deg); transition: transform 0.3s;
        }
        .photo-frame:hover { transform: rotate(0deg) scale(1.05); }

        /* --- 3. GAME UI --- */
        #game-container {
            position: relative; width: 100%; max-width: 500px; height: 400px;
            background: #ffeaa7; border-radius: 15px; overflow: hidden;
            display: none; /* Hidden until start */
            touch-action: none; box-shadow: inset 0 0 20px rgba(0,0,0,0.1); cursor: crosshair;
        }
        canvas { display: block; width: 100%; height: 100%; }
        
        .game-ui { position: absolute; top: 10px; left: 0; width: 100%; text-align: center; pointer-events: none; font-weight: bold; color: #d63031; font-size: 1.2rem; }
        
        #start-btn, .action-btn {
            margin-top: 20px; padding: 12px 30px; font-size: 1.1rem;
            background: linear-gradient(45deg, #ff3366, #ff5e62);
            color: white; border: none; border-radius: 50px; cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 51, 102, 0.4); transition: transform 0.2s;
        }
        #start-btn:hover { transform: scale(1.05); }

        /* Back Button */
        .back-btn {
            position: absolute; top: 20px; left: 20px;
            background: rgba(255,255,255,0.4); padding: 10px 20px; border-radius: 20px;
            text-decoration: none; color: white; font-weight: bold; backdrop-filter: blur(5px);
        }

        /* End Screen */
        .emoji-rose { font-size: 80px; animation: heartbeat 1.5s infinite; }
        @keyframes heartbeat { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <a href="../index.html" class="back-btn">‚Üê Back</a>

    <div class="container">
        
        <div id="intro-screen">
            <img src="../her-rose.jpg" class="photo-frame" alt="Kusum" onerror="this.src='https://placehold.co/200x200?text=Your+Photo'">
            
            <h2>Happy Rose Day To The Person,</h2>
            <p>‡¶Ø‡ßá ‡¶ó‡ßã‡¶≤‡¶æ‡¶™‡ßá‡¶∞ ‡¶™‡¶æ‡¶™‡¶°‡¶º‡¶ø‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ï‡ßã‡¶Æ‡¶≤!</p>
            <p style="font-size: 0.9rem; background: rgba(255,255,255,0.2); padding: 10px; border-radius: 10px;">
                <b>Mission:</b> Catch 15 fresh roses (üåπ) to win.<br>
                <b>Warning:</b> Avoid the wilted ones (ü•Ä)!
            </p>
            <button id="start-btn" onclick="startGame()">Start Game</button>
        </div>

        <div id="game-container">
            <div class="game-ui">
                <span id="score-board">Roses: 0</span> | <span id="lives-board">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
            </div>
            <canvas id="gameCanvas"></canvas>
            
            <div id="game-over" style="display:none; position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.95); flex-direction:column; justify-content:center; align-items:center;">
                <h2 style="color: #2d3436;">Oops! Game Over!</h2>
                <p style="color:#555">But don't worry! Being my one and only girlfriend, you have infinite chances!!</p>
                <button class="action-btn" onclick="startGame()">Try Again</button>
            </div>
            
             <div id="game-win" style="display:none; position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.95); flex-direction:column; justify-content:center; align-items:center;">
                <div class="emoji-rose">üåπ</div>
                <h2 style="color: #e84393;">You Won!</h2>
                <p style="padding: 0 20px; color: #555;">
                You caught the required number of roses<br> 
                  and won the game! (And also my Heart! ü•∫) <br><br>
                <span style="font-size: 1.2rem; color: #ff3366; font-weight:bold;">Happy Rose Day, Kusum!</span>
            </p>
            </div>
        </div>

    </div>

    <script>
        // --- YOUR ORIGINAL GAME LOGIC ---
        let canvas, ctx;
        let gameRunning = false;
        let score = 0;
        let lives = 3;
        let speedMultiplier = 1;
        let basket = { x: 0, width: 60, height: 30 };
        let fallingItems = [];
        let animationId;

        function startGame() {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            document.getElementById('game-over').style.display = 'none';
            document.getElementById('game-win').style.display = 'none';
            
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.parentElement.offsetWidth;
            canvas.height = canvas.parentElement.offsetHeight;
            
            score = 0;
            lives = 3;
            speedMultiplier = 1;
            fallingItems = [];
            basket.x = canvas.width / 2 - basket.width / 2;
            updateUI();
            
            gameRunning = true;
            
            // Re-add listeners to prevent duplication
            canvas.onmousemove = moveBasket;
            canvas.ontouchmove = handleTouch;
            
            loop();
        }

        function updateUI() {
            document.getElementById('score-board').innerText = "Roses: " + score;
            let hearts = "";
            for(let i=0; i<lives; i++) hearts += "‚ù§Ô∏è";
            document.getElementById('lives-board').innerText = hearts;
        }

        function moveBasket(e) {
            const rect = canvas.getBoundingClientRect();
            basket.x = e.clientX - rect.left - basket.width / 2;
        }

        function handleTouch(e) {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            basket.x = touch.clientX - rect.left - basket.width / 2;
        }

        function loop() {
            if (!gameRunning) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Basket
            ctx.font = "40px Arial";
            ctx.fillText("üß∫", basket.x, canvas.height - 10);

            // Spawn Items
            if (Math.random() < 0.03 + (score * 0.001)) {
                const isBad = Math.random() < 0.3; 
                fallingItems.push({
                    x: Math.random() * (canvas.width - 30),
                    y: -30,
                    speed: (Math.random() * 2 + 2) * speedMultiplier,
                    type: isBad ? "bad" : "good",
                    emoji: isBad ? "ü•Ä" : (Math.random() > 0.9 ? "üíñ" : "üåπ")
                });
            }

            // Move Items
            for (let i = 0; i < fallingItems.length; i++) {
                let item = fallingItems[i];
                item.y += item.speed;
                ctx.font = "30px Arial";
                ctx.fillText(item.emoji, item.x, item.y);

                if (item.y > canvas.height - 50 && item.x > basket.x - 20 && item.x < basket.x + basket.width) {
                    if (item.type === "good") {
                        score++;
                        if (score % 5 === 0) speedMultiplier += 0.2;
                        if (score >= 15) { gameWin(); return; }
                    } else {
                        lives--;
                        if (lives <= 0) { gameOver(); return; }
                    }
                    updateUI();
                    fallingItems.splice(i, 1);
                    i--;
                } 
                else if (item.y > canvas.height) {
                    fallingItems.splice(i, 1);
                    i--;
                }
            }
            animationId = requestAnimationFrame(loop);
        }

        function gameOver() {
            gameRunning = false;
            cancelAnimationFrame(animationId);
            document.getElementById('game-over').style.display = 'flex';
        }

        function gameWin() {
            gameRunning = false;
            cancelAnimationFrame(animationId);
            document.getElementById('game-win').style.display = 'flex';
        }
    </script>
</body>
</html>